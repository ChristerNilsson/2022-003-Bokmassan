// Generated by CoffeeScript 2.5.1
var TextScroller;

TextScroller = class TextScroller {
  constructor(dx, dy, dw, dh, ts, text) {
    this.dx = dx;
    this.dy = dy;
    this.dw = dw;
    this.dh = dh;
    this.ts = ts;
    this.text = text;
    textSize(this.ts);
    this.sz = Math.round(textWidth(this.text));
    if (this.sz <= this.dw) { // scroll behövs ej
      this.pg = createGraphics(this.dw, this.dh);
      this.pg.background("green");
      this.pg.textSize(this.ts / 2);
      this.pg.fill("gray");
      this.pg.text(this.text, 0, 0.8 * this.dh); // scroll behövs
    } else {
      this.sz = Math.round(textWidth(this.text + ' • '));
      this.pg = createGraphics(this.sz + this.dw + 100, this.dh);
      this.pg.background("green");
      this.pg.textSize(this.ts / 2);
      this.pg.fill("gray");
      this.pg.text(this.text + ' • ' + this.text, 0, 0.8 * this.dh);
      this.p = 0;
    }
  }

  draw() {
    var sh, sw, sx, sy;
    if (this.p === null) { // scroll behövs ej
      return image(this.pg, this.dx, this.dy); // scrolla
    } else {
      sx = this.p;
      sy = 0;
      sw = this.dw;
      sh = this.dh;
      image(this.pg, 0, this.dy + this.dh);
      //image @pg, @dx, @dy
      image(this.pg, this.dx, this.dy, this.dw, this.dh, sx, sy, sw, sh);
      return this.p = (this.p + 1) % this.sz;
    }
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dFNjcm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXFRleHRTY3JvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQU0sZUFBTixNQUFBLGFBQUE7RUFDQyxXQUFjLEdBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxNQUFBLENBQUE7SUFBQyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFDbkMsUUFBQSxDQUFTLElBQUMsQ0FBQSxFQUFWO0lBQ0EsSUFBQyxDQUFBLEVBQUQsR0FBTSxJQUFJLENBQUMsS0FBTCxDQUFXLFNBQUEsQ0FBVSxJQUFDLENBQUEsSUFBWCxDQUFYO0lBQ04sSUFBRyxJQUFDLENBQUEsRUFBRCxJQUFPLElBQUMsQ0FBQSxFQUFYO01BQ0MsSUFBQyxDQUFBLEVBQUQsR0FBTSxjQUFBLENBQWUsSUFBQyxDQUFBLEVBQWhCLEVBQW1CLElBQUMsQ0FBQSxFQUFwQjtNQUNOLElBQUMsQ0FBQSxFQUFFLENBQUMsVUFBSixDQUFlLE9BQWY7TUFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLFFBQUosQ0FBYSxJQUFDLENBQUEsRUFBRCxHQUFJLENBQWpCO01BQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxJQUFKLENBQVMsTUFBVDtNQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsSUFBSixDQUFTLElBQUMsQ0FBQSxJQUFWLEVBQWUsQ0FBZixFQUFpQixHQUFBLEdBQUksSUFBQyxDQUFBLEVBQXRCLEVBTEQ7S0FBQSxNQUFBO01BT0MsSUFBQyxDQUFBLEVBQUQsR0FBTSxJQUFJLENBQUMsS0FBTCxDQUFXLFNBQUEsQ0FBVSxJQUFDLENBQUEsSUFBRCxHQUFRLEtBQWxCLENBQVg7TUFDTixJQUFDLENBQUEsRUFBRCxHQUFNLGNBQUEsQ0FBZSxJQUFDLENBQUEsRUFBRCxHQUFNLElBQUMsQ0FBQSxFQUFQLEdBQVksR0FBM0IsRUFBZ0MsSUFBQyxDQUFBLEVBQWpDO01BQ04sSUFBQyxDQUFBLEVBQUUsQ0FBQyxVQUFKLENBQWUsT0FBZjtNQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsUUFBSixDQUFhLElBQUMsQ0FBQSxFQUFELEdBQUksQ0FBakI7TUFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLElBQUosQ0FBUyxNQUFUO01BQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxJQUFKLENBQVMsSUFBQyxDQUFBLElBQUQsR0FBUSxLQUFSLEdBQWdCLElBQUMsQ0FBQSxJQUExQixFQUErQixDQUEvQixFQUFpQyxHQUFBLEdBQUksSUFBQyxDQUFBLEVBQXRDO01BQ0EsSUFBQyxDQUFBLENBQUQsR0FBSyxFQWJOOztFQUhhOztFQWtCZCxJQUFPLENBQUEsQ0FBQTtBQUNSLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7SUFBRSxJQUFHLElBQUMsQ0FBQSxDQUFELEtBQU0sSUFBVDthQUNDLEtBQUEsQ0FBTSxJQUFDLENBQUEsRUFBUCxFQUFVLElBQUMsQ0FBQSxFQUFYLEVBQWMsSUFBQyxDQUFBLEVBQWYsRUFERDtLQUFBLE1BQUE7TUFHQyxFQUFBLEdBQUssSUFBQyxDQUFBO01BQ04sRUFBQSxHQUFLO01BQ0wsRUFBQSxHQUFLLElBQUMsQ0FBQTtNQUNOLEVBQUEsR0FBSyxJQUFDLENBQUE7TUFFTixLQUFBLENBQU0sSUFBQyxDQUFBLEVBQVAsRUFBVSxDQUFWLEVBQVksSUFBQyxDQUFBLEVBQUQsR0FBSSxJQUFDLENBQUEsRUFBakIsRUFMSDs7TUFTRyxLQUFBLENBQU0sSUFBQyxDQUFBLEVBQVAsRUFBVSxJQUFDLENBQUEsRUFBWCxFQUFjLElBQUMsQ0FBQSxFQUFmLEVBQWtCLElBQUMsQ0FBQSxFQUFuQixFQUFzQixJQUFDLENBQUEsRUFBdkIsRUFBMEIsRUFBMUIsRUFBNkIsRUFBN0IsRUFBZ0MsRUFBaEMsRUFBbUMsRUFBbkM7YUFFQSxJQUFDLENBQUEsQ0FBRCxHQUFLLENBQUMsSUFBQyxDQUFBLENBQUQsR0FBRyxDQUFKLENBQUEsR0FBUyxJQUFDLENBQUEsR0FkaEI7O0VBRE07O0FBbkJSIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgVGV4dFNjcm9sbGVyXHJcblx0Y29uc3RydWN0b3IgOiAoQGR4LEBkeSxAZHcsQGRoLEB0cyxAdGV4dCkgLT5cclxuXHRcdHRleHRTaXplIEB0c1xyXG5cdFx0QHN6ID0gTWF0aC5yb3VuZCB0ZXh0V2lkdGggQHRleHRcclxuXHRcdGlmIEBzeiA8PSBAZHcgIyBzY3JvbGwgYmVow7Z2cyBlalxyXG5cdFx0XHRAcGcgPSBjcmVhdGVHcmFwaGljcyBAZHcsQGRoXHJcblx0XHRcdEBwZy5iYWNrZ3JvdW5kIFwiZ3JlZW5cIlxyXG5cdFx0XHRAcGcudGV4dFNpemUgQHRzLzJcclxuXHRcdFx0QHBnLmZpbGwgXCJncmF5XCJcclxuXHRcdFx0QHBnLnRleHQgQHRleHQsMCwwLjgqQGRoXHJcblx0XHRlbHNlICMgc2Nyb2xsIGJlaMO2dnNcclxuXHRcdFx0QHN6ID0gTWF0aC5yb3VuZCB0ZXh0V2lkdGggQHRleHQgKyAnIOKAoiAnXHJcblx0XHRcdEBwZyA9IGNyZWF0ZUdyYXBoaWNzIEBzeiArIEBkdyArIDEwMCwgQGRoXHJcblx0XHRcdEBwZy5iYWNrZ3JvdW5kIFwiZ3JlZW5cIlxyXG5cdFx0XHRAcGcudGV4dFNpemUgQHRzLzJcclxuXHRcdFx0QHBnLmZpbGwgXCJncmF5XCJcclxuXHRcdFx0QHBnLnRleHQgQHRleHQgKyAnIOKAoiAnICsgQHRleHQsMCwwLjgqQGRoXHJcblx0XHRcdEBwID0gMFxyXG5cclxuXHRkcmF3IDogKCkgLT5cclxuXHRcdGlmIEBwID09IG51bGwgIyBzY3JvbGwgYmVow7Z2cyBlalxyXG5cdFx0XHRpbWFnZSBAcGcsQGR4LEBkeVxyXG5cdFx0ZWxzZSAjIHNjcm9sbGFcclxuXHRcdFx0c3ggPSBAcFxyXG5cdFx0XHRzeSA9IDBcclxuXHRcdFx0c3cgPSBAZHdcclxuXHRcdFx0c2ggPSBAZGhcclxuXHJcblx0XHRcdGltYWdlIEBwZywwLEBkeStAZGhcclxuXHJcblx0XHRcdCNpbWFnZSBAcGcsIEBkeCwgQGR5XHJcblxyXG5cdFx0XHRpbWFnZSBAcGcsQGR4LEBkeSxAZHcsQGRoLHN4LHN5LHN3LHNoXHJcblxyXG5cdFx0XHRAcCA9IChAcCsxKSAlIEBzelxyXG4iXX0=
//# sourceURL=c:\github\2022-003-Bokmassan\coffee\TextScroller.coffee