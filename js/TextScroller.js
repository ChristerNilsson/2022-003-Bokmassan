// Generated by CoffeeScript 2.5.1
var TextScroller;

TextScroller = class TextScroller {
  constructor(dx, dy, dw, dh, ts, text) {
    var faktor;
    this.dx = dx;
    this.dy = dy;
    this.dw = dw;
    this.dh = dh;
    this.ts = ts;
    this.text = text;
    textSize(this.ts);
    if (window.navigator.userAgent.indexOf('Windows' !== -1)) {
      faktor = 0.5;
    } else {
      faktor = 0.25;
    }
    this.sz = Math.round(textWidth(this.text));
    if (this.sz <= this.dw) { // scroll behövs ej
      this.pg = createGraphics(this.dw, this.dh);
      this.pg.pixelDensity(1);
      this.pg.background("green");
      this.pg.textSize(faktor * this.ts);
      this.pg.fill("gray");
      this.pg.textAlign(LEFT, CENTER);
      this.pg.text(this.text, 0, faktor * this.dh); // scroll behövs
    } else {
      this.sz = Math.round(textWidth(this.text + ' • '));
      this.pg = createGraphics(this.sz + this.dw + 100, this.dh);
      this.pg.pixelDensity(1);
      this.pg.background("green");
      this.pg.textSize(faktor * this.ts);
      this.pg.fill("gray");
      this.pg.textAlign(LEFT, CENTER);
      this.pg.text(this.text + ' • ' + this.text, 0, faktor * this.dh);
      this.p = 0;
    }
  }

  draw() {
    var sh, sw, sx, sy;
    if (this.p === null) { // scroll behövs ej
      return image(this.pg, this.dx, this.dy); // scrolla
    } else {
      sx = this.p;
      sy = 0;
      sw = this.dw;
      sh = this.dh;
      image(this.pg, 0, this.dy + this.dh);
      //image @pg, @dx, @dy
      image(this.pg, this.dx, this.dy, this.dw, this.dh, sx, sy, sw, sh);
      return this.p = (this.p + 1) % this.sz;
    }
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dFNjcm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXFRleHRTY3JvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQU0sZUFBTixNQUFBLGFBQUE7RUFDQyxXQUFjLEdBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxNQUFBLENBQUE7QUFDZixRQUFBO0lBRGdCLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUNuQyxRQUFBLENBQVMsSUFBQyxDQUFBLEVBQVY7SUFDQSxJQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLE9BQTNCLENBQW1DLFNBQUEsS0FBYSxDQUFDLENBQWpELENBQUg7TUFDQyxNQUFBLEdBQU8sSUFEUjtLQUFBLE1BQUE7TUFHQyxNQUFBLEdBQU8sS0FIUjs7SUFJQSxJQUFDLENBQUEsRUFBRCxHQUFNLElBQUksQ0FBQyxLQUFMLENBQVcsU0FBQSxDQUFVLElBQUMsQ0FBQSxJQUFYLENBQVg7SUFDTixJQUFHLElBQUMsQ0FBQSxFQUFELElBQU8sSUFBQyxDQUFBLEVBQVg7TUFDQyxJQUFDLENBQUEsRUFBRCxHQUFNLGNBQUEsQ0FBZSxJQUFDLENBQUEsRUFBaEIsRUFBbUIsSUFBQyxDQUFBLEVBQXBCO01BQ04sSUFBQyxDQUFBLEVBQUUsQ0FBQyxZQUFKLENBQWlCLENBQWpCO01BQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxVQUFKLENBQWUsT0FBZjtNQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsUUFBSixDQUFhLE1BQUEsR0FBUyxJQUFDLENBQUEsRUFBdkI7TUFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLElBQUosQ0FBUyxNQUFUO01BQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxTQUFKLENBQWMsSUFBZCxFQUFtQixNQUFuQjtNQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsSUFBSixDQUFTLElBQUMsQ0FBQSxJQUFWLEVBQWUsQ0FBZixFQUFpQixNQUFBLEdBQU8sSUFBQyxDQUFBLEVBQXpCLEVBUEQ7S0FBQSxNQUFBO01BU0MsSUFBQyxDQUFBLEVBQUQsR0FBTSxJQUFJLENBQUMsS0FBTCxDQUFXLFNBQUEsQ0FBVSxJQUFDLENBQUEsSUFBRCxHQUFRLEtBQWxCLENBQVg7TUFDTixJQUFDLENBQUEsRUFBRCxHQUFNLGNBQUEsQ0FBZSxJQUFDLENBQUEsRUFBRCxHQUFNLElBQUMsQ0FBQSxFQUFQLEdBQVksR0FBM0IsRUFBZ0MsSUFBQyxDQUFBLEVBQWpDO01BQ04sSUFBQyxDQUFBLEVBQUUsQ0FBQyxZQUFKLENBQWlCLENBQWpCO01BQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxVQUFKLENBQWUsT0FBZjtNQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsUUFBSixDQUFhLE1BQUEsR0FBUyxJQUFDLENBQUEsRUFBdkI7TUFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLElBQUosQ0FBUyxNQUFUO01BQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxTQUFKLENBQWMsSUFBZCxFQUFtQixNQUFuQjtNQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsSUFBSixDQUFTLElBQUMsQ0FBQSxJQUFELEdBQVEsS0FBUixHQUFnQixJQUFDLENBQUEsSUFBMUIsRUFBK0IsQ0FBL0IsRUFBaUMsTUFBQSxHQUFPLElBQUMsQ0FBQSxFQUF6QztNQUNBLElBQUMsQ0FBQSxDQUFELEdBQUssRUFqQk47O0VBUGE7O0VBMEJkLElBQU8sQ0FBQSxDQUFBO0FBQ1IsUUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtJQUFFLElBQUcsSUFBQyxDQUFBLENBQUQsS0FBTSxJQUFUO2FBQ0MsS0FBQSxDQUFNLElBQUMsQ0FBQSxFQUFQLEVBQVUsSUFBQyxDQUFBLEVBQVgsRUFBYyxJQUFDLENBQUEsRUFBZixFQUREO0tBQUEsTUFBQTtNQUdDLEVBQUEsR0FBSyxJQUFDLENBQUE7TUFDTixFQUFBLEdBQUs7TUFDTCxFQUFBLEdBQUssSUFBQyxDQUFBO01BQ04sRUFBQSxHQUFLLElBQUMsQ0FBQTtNQUVOLEtBQUEsQ0FBTSxJQUFDLENBQUEsRUFBUCxFQUFVLENBQVYsRUFBWSxJQUFDLENBQUEsRUFBRCxHQUFJLElBQUMsQ0FBQSxFQUFqQixFQUxIOztNQVNHLEtBQUEsQ0FBTSxJQUFDLENBQUEsRUFBUCxFQUFVLElBQUMsQ0FBQSxFQUFYLEVBQWMsSUFBQyxDQUFBLEVBQWYsRUFBa0IsSUFBQyxDQUFBLEVBQW5CLEVBQXNCLElBQUMsQ0FBQSxFQUF2QixFQUEwQixFQUExQixFQUE2QixFQUE3QixFQUFnQyxFQUFoQyxFQUFtQyxFQUFuQzthQUVBLElBQUMsQ0FBQSxDQUFELEdBQUssQ0FBQyxJQUFDLENBQUEsQ0FBRCxHQUFHLENBQUosQ0FBQSxHQUFTLElBQUMsQ0FBQSxHQWRoQjs7RUFETTs7QUEzQlIiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUZXh0U2Nyb2xsZXJcclxuXHRjb25zdHJ1Y3RvciA6IChAZHgsQGR5LEBkdyxAZGgsQHRzLEB0ZXh0KSAtPlxyXG5cdFx0dGV4dFNpemUgQHRzXHJcblx0XHRpZiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdXaW5kb3dzJyAhPSAtMSlcclxuXHRcdFx0ZmFrdG9yPTAuNVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRmYWt0b3I9MC4yNVxyXG5cdFx0QHN6ID0gTWF0aC5yb3VuZCB0ZXh0V2lkdGggQHRleHRcclxuXHRcdGlmIEBzeiA8PSBAZHcgIyBzY3JvbGwgYmVow7Z2cyBlalxyXG5cdFx0XHRAcGcgPSBjcmVhdGVHcmFwaGljcyBAZHcsQGRoXHJcblx0XHRcdEBwZy5waXhlbERlbnNpdHkgMVxyXG5cdFx0XHRAcGcuYmFja2dyb3VuZCBcImdyZWVuXCJcclxuXHRcdFx0QHBnLnRleHRTaXplIGZha3RvciAqIEB0c1xyXG5cdFx0XHRAcGcuZmlsbCBcImdyYXlcIlxyXG5cdFx0XHRAcGcudGV4dEFsaWduIExFRlQsQ0VOVEVSXHJcblx0XHRcdEBwZy50ZXh0IEB0ZXh0LDAsZmFrdG9yKkBkaFxyXG5cdFx0ZWxzZSAjIHNjcm9sbCBiZWjDtnZzXHJcblx0XHRcdEBzeiA9IE1hdGgucm91bmQgdGV4dFdpZHRoIEB0ZXh0ICsgJyDigKIgJ1xyXG5cdFx0XHRAcGcgPSBjcmVhdGVHcmFwaGljcyBAc3ogKyBAZHcgKyAxMDAsIEBkaFxyXG5cdFx0XHRAcGcucGl4ZWxEZW5zaXR5IDFcclxuXHRcdFx0QHBnLmJhY2tncm91bmQgXCJncmVlblwiXHJcblx0XHRcdEBwZy50ZXh0U2l6ZSBmYWt0b3IgKiBAdHNcclxuXHRcdFx0QHBnLmZpbGwgXCJncmF5XCJcclxuXHRcdFx0QHBnLnRleHRBbGlnbiBMRUZULENFTlRFUlxyXG5cdFx0XHRAcGcudGV4dCBAdGV4dCArICcg4oCiICcgKyBAdGV4dCwwLGZha3RvcipAZGhcclxuXHRcdFx0QHAgPSAwXHJcblxyXG5cdGRyYXcgOiAoKSAtPlxyXG5cdFx0aWYgQHAgPT0gbnVsbCAjIHNjcm9sbCBiZWjDtnZzIGVqXHJcblx0XHRcdGltYWdlIEBwZyxAZHgsQGR5XHJcblx0XHRlbHNlICMgc2Nyb2xsYVxyXG5cdFx0XHRzeCA9IEBwXHJcblx0XHRcdHN5ID0gMFxyXG5cdFx0XHRzdyA9IEBkd1xyXG5cdFx0XHRzaCA9IEBkaFxyXG5cclxuXHRcdFx0aW1hZ2UgQHBnLDAsQGR5K0BkaFxyXG5cclxuXHRcdFx0I2ltYWdlIEBwZywgQGR4LCBAZHlcclxuXHJcblx0XHRcdGltYWdlIEBwZyxAZHgsQGR5LEBkdyxAZGgsc3gsc3ksc3csc2hcclxuXHJcblx0XHRcdEBwID0gKEBwKzEpICUgQHN6XHJcbiJdfQ==
//# sourceURL=c:\github\2022-003-Bokmassan\coffee\TextScroller.coffee