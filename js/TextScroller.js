// Generated by CoffeeScript 2.5.1
var TextScroller;

TextScroller = class TextScroller {
  constructor(dx, dy, dw, dh, ts) {
    this.dx = dx;
    this.dy = dy;
    this.dw = dw;
    this.dh = dh;
    this.ts = ts;
    this.pg = createGraphics(10000, this.dh); // 2000
  }

  update(txt) {
    this.text = txt;
    this.visible = this.text !== '';
    push();
    textSize(this.ts);
    this.sz = Math.round(textWidth(this.text));
    this.scroll = this.sz > this.dw;
    if (this.scroll) {
      this.sz = Math.round(textWidth(this.text + ' • '));
      this.makeImage(this.text + ' • ' + this.text);
      this.p = 0;
    } else {
      this.makeImage(this.text);
      this.p = null;
    }
    return pop();
  }

  makeImage(txt) {
    this.pg.background("green");
    this.pg.textSize(this.ts);
    this.pg.fill("white");
    this.pg.textAlign(LEFT, CENTER);
    return this.pg.text(txt, 0, this.dh / 2);
  }

  draw() {
    // push()
    // textSize @ts
    // rect @dx,@dy,@dw,@dh
    // textAlign LEFT,CENTER
    // text "#{@visible} #{@scroll} #{@text}",@dx,@dy+@dh/2
    // pop()
    push();
    if (this.visible) {
      image(this.pg, 0, this.dy - this.dh);
      if (this.scroll) {
        image(this.pg, this.dx, this.dy, this.dw, this.dh, this.p, 0, this.dw, this.dh);
        this.p = (this.p + 1) % this.sz;
      } else {
        image(this.pg, this.dx, this.dy);
      }
    }
    return pop();
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dFNjcm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXFRleHRTY3JvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQU0sZUFBTixNQUFBLGFBQUE7RUFDQyxXQUFjLEdBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxDQUFBO0lBQUMsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQy9CLElBQUMsQ0FBQSxFQUFELEdBQU0sY0FBQSxDQUFlLEtBQWYsRUFBc0IsSUFBQyxDQUFBLEVBQXZCLEVBRE87RUFBQTs7RUFHZCxNQUFTLENBQUMsR0FBRCxDQUFBO0lBQ1IsSUFBQyxDQUFBLElBQUQsR0FBUTtJQUNSLElBQUMsQ0FBQSxPQUFELEdBQVcsSUFBQyxDQUFBLElBQUQsS0FBUztJQUNwQixJQUFBLENBQUE7SUFDQSxRQUFBLENBQVMsSUFBQyxDQUFBLEVBQVY7SUFDQSxJQUFDLENBQUEsRUFBRCxHQUFNLElBQUksQ0FBQyxLQUFMLENBQVcsU0FBQSxDQUFVLElBQUMsQ0FBQSxJQUFYLENBQVg7SUFDTixJQUFDLENBQUEsTUFBRCxHQUFVLElBQUMsQ0FBQSxFQUFELEdBQU0sSUFBQyxDQUFBO0lBQ2pCLElBQUcsSUFBQyxDQUFBLE1BQUo7TUFDQyxJQUFDLENBQUEsRUFBRCxHQUFNLElBQUksQ0FBQyxLQUFMLENBQVcsU0FBQSxDQUFVLElBQUMsQ0FBQSxJQUFELEdBQVEsS0FBbEIsQ0FBWDtNQUNOLElBQUMsQ0FBQSxTQUFELENBQVcsSUFBQyxDQUFBLElBQUQsR0FBUSxLQUFSLEdBQWdCLElBQUMsQ0FBQSxJQUE1QjtNQUNBLElBQUMsQ0FBQSxDQUFELEdBQUssRUFITjtLQUFBLE1BQUE7TUFLQyxJQUFDLENBQUEsU0FBRCxDQUFXLElBQUMsQ0FBQSxJQUFaO01BQ0EsSUFBQyxDQUFBLENBQUQsR0FBSyxLQU5OOztXQU9BLEdBQUEsQ0FBQTtFQWRROztFQWdCVCxTQUFZLENBQUMsR0FBRCxDQUFBO0lBQ1gsSUFBQyxDQUFBLEVBQUUsQ0FBQyxVQUFKLENBQWUsT0FBZjtJQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsUUFBSixDQUFhLElBQUMsQ0FBQSxFQUFkO0lBQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxJQUFKLENBQVMsT0FBVDtJQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsU0FBSixDQUFjLElBQWQsRUFBbUIsTUFBbkI7V0FDQSxJQUFDLENBQUEsRUFBRSxDQUFDLElBQUosQ0FBUyxHQUFULEVBQWEsQ0FBYixFQUFlLElBQUMsQ0FBQSxFQUFELEdBQUksQ0FBbkI7RUFMVzs7RUFPWixJQUFPLENBQUEsQ0FBQSxFQUFBOzs7Ozs7O0lBUU4sSUFBQSxDQUFBO0lBQ0EsSUFBRyxJQUFDLENBQUEsT0FBSjtNQUNDLEtBQUEsQ0FBTSxJQUFDLENBQUEsRUFBUCxFQUFXLENBQVgsRUFBYSxJQUFDLENBQUEsRUFBRCxHQUFJLElBQUMsQ0FBQSxFQUFsQjtNQUNBLElBQUcsSUFBQyxDQUFBLE1BQUo7UUFDQyxLQUFBLENBQU0sSUFBQyxDQUFBLEVBQVAsRUFBVyxJQUFDLENBQUEsRUFBWixFQUFlLElBQUMsQ0FBQSxFQUFoQixFQUFtQixJQUFDLENBQUEsRUFBcEIsRUFBdUIsSUFBQyxDQUFBLEVBQXhCLEVBQTRCLElBQUMsQ0FBQSxDQUE3QixFQUErQixDQUEvQixFQUFpQyxJQUFDLENBQUEsRUFBbEMsRUFBcUMsSUFBQyxDQUFBLEVBQXRDO1FBQ0EsSUFBQyxDQUFBLENBQUQsR0FBSyxDQUFDLElBQUMsQ0FBQSxDQUFELEdBQUcsQ0FBSixDQUFBLEdBQVMsSUFBQyxDQUFBLEdBRmhCO09BQUEsTUFBQTtRQUlDLEtBQUEsQ0FBTSxJQUFDLENBQUEsRUFBUCxFQUFXLElBQUMsQ0FBQSxFQUFaLEVBQWUsSUFBQyxDQUFBLEVBQWhCLEVBSkQ7T0FGRDs7V0FPQSxHQUFBLENBQUE7RUFoQk07O0FBM0JSIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgVGV4dFNjcm9sbGVyXHJcblx0Y29uc3RydWN0b3IgOiAoQGR4LEBkeSxAZHcsQGRoLEB0cykgLT5cclxuXHRcdEBwZyA9IGNyZWF0ZUdyYXBoaWNzIDEwMDAwLCBAZGggICMgMjAwMFxyXG5cclxuXHR1cGRhdGUgOiAodHh0KSAtPlxyXG5cdFx0QHRleHQgPSB0eHRcclxuXHRcdEB2aXNpYmxlID0gQHRleHQgIT0gJydcclxuXHRcdHB1c2goKVxyXG5cdFx0dGV4dFNpemUgQHRzXHJcblx0XHRAc3ogPSBNYXRoLnJvdW5kIHRleHRXaWR0aCBAdGV4dFxyXG5cdFx0QHNjcm9sbCA9IEBzeiA+IEBkd1xyXG5cdFx0aWYgQHNjcm9sbFxyXG5cdFx0XHRAc3ogPSBNYXRoLnJvdW5kIHRleHRXaWR0aCBAdGV4dCArICcg4oCiICdcclxuXHRcdFx0QG1ha2VJbWFnZSBAdGV4dCArICcg4oCiICcgKyBAdGV4dFxyXG5cdFx0XHRAcCA9IDBcclxuXHRcdGVsc2VcclxuXHRcdFx0QG1ha2VJbWFnZSBAdGV4dFxyXG5cdFx0XHRAcCA9IG51bGxcclxuXHRcdHBvcCgpXHJcblxyXG5cdG1ha2VJbWFnZSA6ICh0eHQpIC0+XHJcblx0XHRAcGcuYmFja2dyb3VuZCBcImdyZWVuXCJcclxuXHRcdEBwZy50ZXh0U2l6ZSBAdHNcclxuXHRcdEBwZy5maWxsIFwid2hpdGVcIlxyXG5cdFx0QHBnLnRleHRBbGlnbiBMRUZULENFTlRFUlxyXG5cdFx0QHBnLnRleHQgdHh0LDAsQGRoLzJcclxuXHJcblx0ZHJhdyA6ICgpIC0+XHJcblx0XHQjIHB1c2goKVxyXG5cdFx0IyB0ZXh0U2l6ZSBAdHNcclxuXHRcdCMgcmVjdCBAZHgsQGR5LEBkdyxAZGhcclxuXHRcdCMgdGV4dEFsaWduIExFRlQsQ0VOVEVSXHJcblx0XHQjIHRleHQgXCIje0B2aXNpYmxlfSAje0BzY3JvbGx9ICN7QHRleHR9XCIsQGR4LEBkeStAZGgvMlxyXG5cdFx0IyBwb3AoKVxyXG5cclxuXHRcdHB1c2goKVxyXG5cdFx0aWYgQHZpc2libGVcclxuXHRcdFx0aW1hZ2UgQHBnLCAwLEBkeS1AZGhcclxuXHRcdFx0aWYgQHNjcm9sbFxyXG5cdFx0XHRcdGltYWdlIEBwZywgQGR4LEBkeSxAZHcsQGRoLCBAcCwwLEBkdyxAZGhcclxuXHRcdFx0XHRAcCA9IChAcCsxKSAlIEBzelxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0aW1hZ2UgQHBnLCBAZHgsQGR5XHJcblx0XHRwb3AoKSJdfQ==
//# sourceURL=c:\github\2022-003-Bokmassan\coffee\TextScroller.coffee