// Generated by CoffeeScript 2.5.1
var TextScroller;

TextScroller = class TextScroller {
  constructor(dx, dy, dw, dh, ts) {
    this.dx = dx;
    this.dy = dy;
    this.dw = dw;
    this.dh = dh;
    this.ts = ts;
    this.pg = createGraphics(2000, this.dh);
  }

  update(txt) {
    this.text = txt;
    this.visible = this.text !== '';
    push();
    textSize(this.ts);
    this.sz = Math.round(textWidth(this.text));
    this.scroll = this.sz > this.dw;
    if (this.scroll) {
      this.sz = Math.round(textWidth(this.text + ' • '));
      this.makeImage(this.text + ' • ' + this.text);
      this.p = 0;
    } else {
      this.makeImage(this.text);
      this.p = null;
    }
    return pop();
  }

  makeImage(txt) {
    this.pg.background("green");
    this.pg.textSize(this.ts);
    this.pg.fill("white");
    this.pg.textAlign(LEFT, CENTER);
    return this.pg.text(txt, 0, this.dh / 2);
  }

  draw() {
    push();
    textSize(this.ts);
    rect(this.dx, this.dy, this.dw, this.dh);
    textAlign(LEFT, CENTER);
    text(`${this.visible} ${this.scroll} ${this.text}`, this.dx, this.dy + this.dh / 2);
    return pop();
  }

};

// 	image @pg, 0,@dy-@dh
// 	if @scroll
// 		image @pg, @dx,@dy,@dw,@dh, @p,0,@dw,@dh
// 		@p = (@p+1) % @sz
// 	else
// 		image @pg, @dx,@dy

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dFNjcm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXFRleHRTY3JvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQU0sZUFBTixNQUFBLGFBQUE7RUFDQyxXQUFjLEdBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxDQUFBO0lBQUMsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQy9CLElBQUMsQ0FBQSxFQUFELEdBQU0sY0FBQSxDQUFlLElBQWYsRUFBcUIsSUFBQyxDQUFBLEVBQXRCO0VBRE87O0VBR2QsTUFBUyxDQUFDLEdBQUQsQ0FBQTtJQUNSLElBQUMsQ0FBQSxJQUFELEdBQVE7SUFDUixJQUFDLENBQUEsT0FBRCxHQUFXLElBQUMsQ0FBQSxJQUFELEtBQVM7SUFDcEIsSUFBQSxDQUFBO0lBQ0EsUUFBQSxDQUFTLElBQUMsQ0FBQSxFQUFWO0lBQ0EsSUFBQyxDQUFBLEVBQUQsR0FBTSxJQUFJLENBQUMsS0FBTCxDQUFXLFNBQUEsQ0FBVSxJQUFDLENBQUEsSUFBWCxDQUFYO0lBQ04sSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFDLENBQUEsRUFBRCxHQUFNLElBQUMsQ0FBQTtJQUNqQixJQUFHLElBQUMsQ0FBQSxNQUFKO01BQ0MsSUFBQyxDQUFBLEVBQUQsR0FBTSxJQUFJLENBQUMsS0FBTCxDQUFXLFNBQUEsQ0FBVSxJQUFDLENBQUEsSUFBRCxHQUFRLEtBQWxCLENBQVg7TUFDTixJQUFDLENBQUEsU0FBRCxDQUFXLElBQUMsQ0FBQSxJQUFELEdBQVEsS0FBUixHQUFnQixJQUFDLENBQUEsSUFBNUI7TUFDQSxJQUFDLENBQUEsQ0FBRCxHQUFLLEVBSE47S0FBQSxNQUFBO01BS0MsSUFBQyxDQUFBLFNBQUQsQ0FBVyxJQUFDLENBQUEsSUFBWjtNQUNBLElBQUMsQ0FBQSxDQUFELEdBQUssS0FOTjs7V0FPQSxHQUFBLENBQUE7RUFkUTs7RUFnQlQsU0FBWSxDQUFDLEdBQUQsQ0FBQTtJQUNYLElBQUMsQ0FBQSxFQUFFLENBQUMsVUFBSixDQUFlLE9BQWY7SUFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLFFBQUosQ0FBYSxJQUFDLENBQUEsRUFBZDtJQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsSUFBSixDQUFTLE9BQVQ7SUFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLFNBQUosQ0FBYyxJQUFkLEVBQW1CLE1BQW5CO1dBQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxJQUFKLENBQVMsR0FBVCxFQUFhLENBQWIsRUFBZSxJQUFDLENBQUEsRUFBRCxHQUFJLENBQW5CO0VBTFc7O0VBT1osSUFBTyxDQUFBLENBQUE7SUFDTixJQUFBLENBQUE7SUFDQSxRQUFBLENBQVMsSUFBQyxDQUFBLEVBQVY7SUFDQSxJQUFBLENBQUssSUFBQyxDQUFBLEVBQU4sRUFBUyxJQUFDLENBQUEsRUFBVixFQUFhLElBQUMsQ0FBQSxFQUFkLEVBQWlCLElBQUMsQ0FBQSxFQUFsQjtJQUNBLFNBQUEsQ0FBVSxJQUFWLEVBQWUsTUFBZjtJQUNBLElBQUEsQ0FBSyxDQUFBLENBQUEsQ0FBRyxJQUFDLENBQUEsT0FBSixFQUFBLENBQUEsQ0FBZSxJQUFDLENBQUEsTUFBaEIsRUFBQSxDQUFBLENBQTBCLElBQUMsQ0FBQSxJQUEzQixDQUFBLENBQUwsRUFBdUMsSUFBQyxDQUFBLEVBQXhDLEVBQTJDLElBQUMsQ0FBQSxFQUFELEdBQUksSUFBQyxDQUFBLEVBQUQsR0FBSSxDQUFuRDtXQUNBLEdBQUEsQ0FBQTtFQU5NOztBQTNCUjs7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFRleHRTY3JvbGxlclxyXG5cdGNvbnN0cnVjdG9yIDogKEBkeCxAZHksQGR3LEBkaCxAdHMpIC0+XHJcblx0XHRAcGcgPSBjcmVhdGVHcmFwaGljcyAyMDAwLCBAZGhcclxuXHJcblx0dXBkYXRlIDogKHR4dCkgLT5cclxuXHRcdEB0ZXh0ID0gdHh0XHJcblx0XHRAdmlzaWJsZSA9IEB0ZXh0ICE9ICcnXHJcblx0XHRwdXNoKClcclxuXHRcdHRleHRTaXplIEB0c1xyXG5cdFx0QHN6ID0gTWF0aC5yb3VuZCB0ZXh0V2lkdGggQHRleHRcclxuXHRcdEBzY3JvbGwgPSBAc3ogPiBAZHdcclxuXHRcdGlmIEBzY3JvbGxcclxuXHRcdFx0QHN6ID0gTWF0aC5yb3VuZCB0ZXh0V2lkdGggQHRleHQgKyAnIOKAoiAnXHJcblx0XHRcdEBtYWtlSW1hZ2UgQHRleHQgKyAnIOKAoiAnICsgQHRleHRcclxuXHRcdFx0QHAgPSAwXHJcblx0XHRlbHNlXHJcblx0XHRcdEBtYWtlSW1hZ2UgQHRleHRcclxuXHRcdFx0QHAgPSBudWxsXHJcblx0XHRwb3AoKVxyXG5cclxuXHRtYWtlSW1hZ2UgOiAodHh0KSAtPlxyXG5cdFx0QHBnLmJhY2tncm91bmQgXCJncmVlblwiXHJcblx0XHRAcGcudGV4dFNpemUgQHRzXHJcblx0XHRAcGcuZmlsbCBcIndoaXRlXCJcclxuXHRcdEBwZy50ZXh0QWxpZ24gTEVGVCxDRU5URVJcclxuXHRcdEBwZy50ZXh0IHR4dCwwLEBkaC8yXHJcblxyXG5cdGRyYXcgOiAoKSAtPlxyXG5cdFx0cHVzaCgpXHJcblx0XHR0ZXh0U2l6ZSBAdHNcclxuXHRcdHJlY3QgQGR4LEBkeSxAZHcsQGRoXHJcblx0XHR0ZXh0QWxpZ24gTEVGVCxDRU5URVJcclxuXHRcdHRleHQgXCIje0B2aXNpYmxlfSAje0BzY3JvbGx9ICN7QHRleHR9XCIsQGR4LEBkeStAZGgvMlxyXG5cdFx0cG9wKClcclxuXHRcdCMgXHRpbWFnZSBAcGcsIDAsQGR5LUBkaFxyXG5cdFx0IyBcdGlmIEBzY3JvbGxcclxuXHRcdCMgXHRcdGltYWdlIEBwZywgQGR4LEBkeSxAZHcsQGRoLCBAcCwwLEBkdyxAZGhcclxuXHRcdCMgXHRcdEBwID0gKEBwKzEpICUgQHN6XHJcblx0XHQjIFx0ZWxzZVxyXG5cdFx0IyBcdFx0aW1hZ2UgQHBnLCBAZHgsQGR5XHJcbiJdfQ==
//# sourceURL=c:\github\2022-003-Bokmassan\coffee\TextScroller.coffee